<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <title>Calculando.cl ‚Äì Calculadoras Chile 2026</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/icon-512.png">
  <link rel="apple-touch-icon" href="/icon-192.png">
  <meta
    name="description"
    content="Calculando.cl: calculadora de boletas de honorarios, conversor UF‚ÜîCLP y calculadora de IVA. Herramientas simples y modernas para tus c√°lculos en Chile."
  />
  <link rel="canonical" href="https://calculando.cl/" />
  <link rel="stylesheet" href="/css/calculando.css">

  <!-- Pa√≠s (tucalculo.com) -->
  <script src="/js/country-preference.js"></script>
  <script>
    // OJO: esto solo har√° algo en tucalculo.com y SOLO cuando est√©s en "/"
    if (window.tcCountry?.handleRootCountryRedirect) {
      window.tcCountry.handleRootCountryRedirect();
    }

    window.addEventListener('DOMContentLoaded', () => {
      if (window.tcCountry?.addChangeCountryLink) {
        window.tcCountry.addChangeCountryLink();
      }
    });
  </script>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6081924342681092"
     crossorigin="anonymous"></script>
</head>
<body>
<main>
  <header>
    <div class="logo-block">
      <div class="logo-mark">C</div>
      <div class="logo-text">
        <strong>Calculando.cl</strong>
        <span>Tus c√°lculos, sin enredos.</span>
      </div>
    </div>

    <button id="themeToggle" class="theme-toggle" type="button">
      <span class="theme-toggle-icon" id="themeIcon">üåô</span>
      <span id="themeLabel">Modo oscuro</span>
    </button>

    <a href="/mx/" style="font-size:13px;color:var(--primary);text-decoration:underline;">
      Versi√≥n M√©xico
    </a>
  </header>

  <section class="hero">
    <h1>Calculadoras r√°pidas para tu d√≠a a d√≠a en Chile</h1>
    <p>
      Comienza con la calculadora de boletas de honorarios, el conversor UF‚ÜîCLP
      o la calculadora de IVA. Herramientas simples, sin publicidad invasiva y pensadas para el celular.
    </p>
    <div class="pill">
      <span class="pill-dot"></span>
      Sumando nuevas calculadoras pronto
    </div>

   <div class="tool-nav" id="toolNav">
      <a class="tool-tab" data-page="home" data-tool="boleta" href="/">
        <span>üè†</span> Inicio
      </a>
      <a class="tool-tab" data-page="boleta" data-tool="boleta" href="/boleta/">
        <span>üßæ</span> Boleta de honorarios
      </a>
      <a class="tool-tab" data-page="sueldo" data-tool="sueldo" href="/sueldo-liquido/">
        <span>üíº</span> Sueldo L√≠quido
      </a>
      <a class="tool-tab" data-page="uf" data-tool="uf" href="/uf/">
        <span>üí±</span> Calculadora UF
      </a>
      <a class="tool-tab" data-page="iva" data-tool="iva" href="/iva/">
        <span>üßÆ</span> Calculadora IVA
      </a>
    </div>
  </section>

  <!-- ------------- TOOL 1: BOLETA ------------- -->
  <section id="tool-boleta" class="shell tool-shell tool-shell-active">
    <div class="tool-title">Calculadora de Boletas de Honorarios 2026</div>
    <div class="tool-subtitle">
      Ingresa un monto en pesos chilenos y te mostramos dos escenarios:
      si el monto es <strong>en l√≠quido</strong> o <strong>en bruto</strong>,
      con la retenci√≥n aproximada que se va al SII.
    </div>
<div class="tool-subtitle" style="margin-top:12px;">
  La calculadora de Boleta de Honorarios de Calculando.cl te permite obtener el valor bruto, el valor
  neto y la retenci√≥n autom√°tica seg√∫n la tasa vigente del SII para 2026. Es una herramienta r√°pida
  para profesionales independientes que necesitan emitir o revisar una boleta electr√≥nica sin errores.
  Ingresa un monto y obt√©n el desglose listo para usar.
</div>
    <div class="pill" style="margin-top:0;margin-bottom:12px;">
      <span class="pill-dot"></span>
      Tasa por defecto: 14,5% ¬∑ Resultados referenciales, verifica siempre en SII.cl
    </div>

    <div class="input-row">
      <div class="input-label">Monto en CLP</div>
      <div class="amount-wrap">
        <span class="amount-prefix">$</span>
        <input
          id="monto"
          class="amount-input"
          type="number"
          inputmode="numeric"
          min="0"
          step="1000"
          placeholder="Ej: 1000000"
        />
      </div>
    </div>

    <div class="rate-row">
      <div class="rate-group" id="rateGroup">
        <label class="rate-pill active">
          <input type="radio" name="rate" value="0.145" checked />
          14,5% <span style="font-size:10px;opacity:.8;">(actual 2026)</span>
        </label>
        <label class="rate-pill">
          <input type="radio" name="rate" value="0.1375" />
          13,75% <span style="font-size:10px;opacity:.8;">(referencial anterior)</span>
        </label>
      </div>
      <div class="helper">
        El c√°lculo se actualiza solo al escribir o cambiar la tasa.
      </div>
    </div>

    <div id="error" class="error"></div>

    <div class="results-row" id="results" style="opacity:0.45;">
      <div class="result-card">
        <div class="result-title">Si el monto ingresado es L√çQUIDO</div>
        <div class="result-main-label">Debes emitir la boleta por:</div>
        <div id="liq-bruto" class="result-value">$0</div>
        <div class="result-sub">
          Recibir√°s <span id="liq-liquido" class="result-highlight">$0</span>
          en tu cuenta y se retendr√°n
          <span id="liq-retencion" class="result-highlight">$0</span>
          para el SII.
        </div>
      </div>

      <div class="result-card">
        <div class="result-title">Si el monto ingresado es BRUTO</div>
        <div class="result-main-label">Emitir√°s la boleta por:</div>
        <div id="bru-bruto" class="result-value">$0</div>
        <div class="result-sub">
          Te depositar√°n
          <span id="bru-liquido" class="result-highlight">$0</span>
          y se retendr√°n
          <span id="bru-retencion" class="result-highlight">$0</span>
          para el SII.
        </div>
      </div>
    </div>
  </section>

<!-- ------------- TOOL 2: SUELDO ------------- -->
<section id="tool-sueldo" class="shell tool-shell">
  <div class="tool-title">Calculadora de Sueldo L√≠quido 2026 (Simplificada)</div>
  <div class="tool-subtitle">
    Ingresa tu sueldo bruto y calculamos tus descuentos estimados:
    AFP, salud, cesant√≠a e impuesto simplificado.
  </div>
<div class="tool-subtitle" style="margin-top:12px;">
  La calculadora de Sueldo L√≠quido de Calculando.cl convierte tu sueldo bruto a neto usando los
  descuentos obligatorios vigentes en Chile: AFP, salud, seguro de cesant√≠a y cotizaciones legales.
  Es ideal para comparar ofertas laborales, estimar tu ingreso real y calcular cu√°nto recibir√°s cada
  mes en tu cuenta.
</div>
  <div class="input-row">
    <div class="input-label">Sueldo bruto</div>
    <div class="amount-wrap">
      <span class="amount-prefix">$</span>
      <input
        id="sl-bruto"
        class="amount-input"
        type="number"
        inputmode="numeric"
        min="0"
        step="1000"
        placeholder="Ej: 1200000"
      />
    </div>
  </div>

  <div class="input-row">
    <div class="input-label">AFP (%)</div>
    <div class="amount-wrap">
      <input id="sl-afp" class="amount-input" type="number" step="0.01" value="11.44" />
    </div>
  </div>

  <div class="input-row">
    <div class="input-label">Salud (%)</div>
    <div class="amount-wrap">
      <input id="sl-salud" class="amount-input" type="number" step="0.1" value="7" />
    </div>
  </div>

  <div class="input-row">
    <div class="input-label">Cesant√≠a (%)</div>
    <div class="amount-wrap">
      <input id="sl-cesantia" class="amount-input" type="number" step="0.1" value="0.6" />
    </div>
  </div>

  <div id="sl-error" class="error"></div>

  <div class="results-row" id="sl-results" style="opacity:0.45; margin-top:16px;">
    <div class="result-card">
      <div class="result-title">Descuentos obligatorios</div>

      <div class="result-main-label">AFP:</div>
      <div id="sl-afp-val" class="result-value">$0</div>

      <div class="result-main-label" style="margin-top:10px;">Salud:</div>
      <div id="sl-salud-val" class="result-value">$0</div>

      <div class="result-main-label" style="margin-top:10px;">Cesant√≠a:</div>
      <div id="sl-cesantia-val" class="result-value">$0</div>
    </div>

    <div class="result-card">
      <div class="result-title">Resultado final</div>

      <div class="result-main-label">Impuesto (simple):</div>
      <div id="sl-impuesto-val" class="result-value">$0</div>

      <div class="result-main-label" style="margin-top:10px;">Sueldo l√≠quido:</div>
      <div id="sl-liquido-val" class="result-value" style="color:var(--accent);">$0</div>
    </div>
  </div>
</section>

  <!-- ------------- TOOL 3: UF ------------- -->
  <section id="tool-uf" class="shell tool-shell">
    <div class="tool-title">Calculadora UF ‚Üî Pesos chilenos</div>
    <div class="tool-subtitle">
      Ingresa el monto y el valor de la UF que quieras usar.
      Puedes convertir de pesos a UF o de UF a pesos.
    </div>

    <div class="tool-subtitle tool-extra">
      La calculadora UF de Calculando.cl te permite convertir r√°pidamente entre UF y pesos chilenos
      usando el valor actualizado de la Unidad de Fomento en Chile. Es √∫til para estimar arriendos,
      dividendos, cr√©ditos hipotecarios y contratos que est√©n expresados en UF. Solo ingresa un monto
      en pesos o en UF y obtendr√°s su equivalente al instante.
    </div>

    <div class="input-row">
      <div class="input-label">Monto</div>
      <div class="amount-wrap">
        <input
          id="ufMonto"
          class="amount-input"
          type="number"
          inputmode="decimal"
          min="0"
          step="0.0001"
          placeholder="Ej: 1000000 o 10"
        />
      </div>
    </div>

    <div class="input-row">
      <div class="input-label">Valor UF</div>
      <div class="amount-wrap">
        <span class="amount-prefix">$</span>
        <input
          id="ufValor"
          class="amount-input"
          type="number"
          inputmode="decimal"
          min="0"
          step="1"
          placeholder="Cargando UF..."
        />
      </div>
    </div>

    <div class="direction-row" id="ufDirectionGroup">
      <label class="direction-pill direction-pill-active">
        <input type="radio" name="ufDirection" value="clpToUf" checked />
        De pesos chilenos a UF
      </label>
      <label class="direction-pill">
        <input type="radio" name="ufDirection" value="ufToClp" />
        De UF a pesos chilenos
      </label>
    </div>

    <div class="helper" id="ufLegend">
      Tip: el valor UF es referencial. Puedes editarlo si necesitas otra fecha.
    </div>

    <div id="ufError" class="error"></div>

    <div id="ufResults" class="uf-results" style="opacity:0.45;">
      Ingresa un monto y el valor UF para ver el resultado.
    </div>
  </section>

  <!-- ------------- TOOL 4: IVA ------------- -->
  <section id="tool-iva" class="shell tool-shell">
    <div class="tool-title">Calculadora IVA (19%)</div>
    <div class="tool-subtitle">
      Convierte entre valores netos y brutos o calcula s√≥lo el IVA, usando la tasa est√°ndar del 19% en Chile.
    </div>
<div class="tool-subtitle" style="margin-top:12px;">
  La calculadora de IVA de Calculando.cl te permite obtener el monto neto, el monto bruto y el valor
  del IVA aplicando la tasa del 19% usada en Chile. Es una herramienta √∫til para cotizaciones,
  presupuestos, ventas y cualquier c√°lculo r√°pido relacionado con precios con o sin IVA.
</div>
    <div class="input-row">
      <div class="input-label">Monto</div>
      <div class="amount-wrap">
        <span class="amount-prefix">$</span>
        <input
          id="ivaMonto"
          class="amount-input"
          type="number"
          inputmode="decimal"
          min="0"
          step="100"
          placeholder="Ej: 100000"
        />
      </div>
    </div>

    <div class="direction-row" id="ivaModeGroup">
      <label class="direction-pill direction-pill-active">
        <input type="radio" name="ivaMode" value="netoBruto" checked />
        De neto a bruto
      </label>
      <label class="direction-pill">
        <input type="radio" name="ivaMode" value="brutoNeto" />
        De bruto a neto
      </label>
      <label class="direction-pill">
        <input type="radio" name="ivaMode" value="soloIVA" />
        Calcular s√≥lo IVA
      </label>
    </div>

    <div class="helper">
      Tip: usa neto cuando el precio es ‚Äúsin IVA‚Äù y bruto cuando incluye IVA.
    </div>

    <div id="ivaError" class="error"></div>

    <div id="ivaResults" class="iva-results" style="opacity:0.45;">
      Ingresa un monto para calcular su IVA, valor neto y bruto.
    </div>
  </section>

 <!-- ========== BLOG DESTACADO 2026 (DIN√ÅMICO) ========== -->
<section class="shell" style="margin-top:26px;">
  <div class="tool-title">√öltimos art√≠culos del Blog 2026</div>
  <div class="tool-subtitle">
    Explicaciones simples sobre sueldos, impuestos, UF y c√°lculos laborales en Chile.
  </div>

  <ul id="blogLatestList"
      style="list-style:none;padding-left:0;display:grid;gap:14px;margin-top:14px;">
    <li class="tool-subtitle">Cargando art√≠culos del blog‚Ä¶</li>
  </ul>

  <div style="margin-top:18px;">
    <a href="/blog/"
       style="font-size:13px;color:var(--primary);text-decoration:underline;">
      Ver todos los art√≠culos del blog ‚Üí
    </a>
  </div>
</section>
<!-- ========== FIN BLOG DESTACADO 2026 (DIN√ÅMICO) ========== -->
  <footer>
    TuCalculo.com es un proyecto independiente y no tiene relaci√≥n con Servicio de Impuestos Internos (SII) ni con ning√∫n organismo del Estado. Las herramientas entregan resultados referenciales y no constituyen asesor√≠a oficial. Ante dudas, consulta con un profesional o la entidad correspondiente.
  </footer>


</main>

<script src="/blog/posts.js"></script>

<script>
  // ---------- TEMA CLARO/OSCURO ----------
  const themeToggle = document.getElementById("themeToggle");
  const themeIcon = document.getElementById("themeIcon");
  const themeLabel = document.getElementById("themeLabel");
  const rootEl = document.documentElement;

  function applyTheme(theme) {
    rootEl.setAttribute("data-theme", theme);
    if (theme === "dark") {
      themeIcon.textContent = "üåô";
      themeLabel.textContent = "Modo oscuro";
    } else {
      themeIcon.textContent = "‚òÄÔ∏è";
      themeLabel.textContent = "Modo claro";
    }
  }

  (function initTheme() {
    const stored = localStorage.getItem("calculando-theme");
    if (stored === "light" || stored === "dark") {
      applyTheme(stored);
    } else {
      applyTheme("dark");
    }
  })();

  themeToggle.addEventListener("click", () => {
    const current = rootEl.getAttribute("data-theme") || "dark";
    const next = current === "dark" ? "light" : "dark";
    applyTheme(next);
    localStorage.setItem("calculando-theme", next);
  });

  // ---------- NAV ENTRE HERRAMIENTAS ----------
  const toolNav = document.getElementById("toolNav");
  const toolTabs = toolNav.querySelectorAll(".tool-tab");
  const boletaSection = document.getElementById("tool-boleta");
  const sueldoSection = document.getElementById("tool-sueldo");
  const ufSection = document.getElementById("tool-uf");
  const ivaSection = document.getElementById("tool-iva");

  function setActiveNav(page) {
    toolTabs.forEach(tab => {
      const isActive = tab.dataset.page === page;
      tab.classList.toggle("tool-tab-active", isActive);
    });
  }

  function activateTool(tool) {
    boletaSection.classList.toggle("tool-shell-active", tool === "boleta");
    sueldoSection.classList.toggle("tool-shell-active", tool === "sueldo");
    ufSection.classList.toggle("tool-shell-active", tool === "uf");
    ivaSection.classList.toggle("tool-shell-active", tool === "iva");
  }

  (function selectToolFromPath() {
    let path = window.location.pathname || "/";
    if (path.length > 1 && path.endsWith("/")) path = path.slice(0, -1);

    let page = "home";
    let tool = "boleta";

    if (path.endsWith("/boleta")) { page = "boleta"; tool = "boleta"; }
    else if (path.endsWith("/sueldo-liquido")) { page = "sueldo"; tool = "sueldo"; }
    else if (path.endsWith("/uf")) { page = "uf"; tool = "uf"; }
    else if (path.endsWith("/iva")) { page = "iva"; tool = "iva"; }

    setActiveNav(page);
    activateTool(tool);
  })();

  // ---------- UTILS ----------
  function formatCLP(value) {
    if (!isFinite(value)) return "$0";
    try {
      return new Intl.NumberFormat("es-CL", {
        style: "currency",
        currency: "CLP",
        maximumFractionDigits: 0
      }).format(Math.round(value));
    } catch (e) {
      return "$" + Math.round(value).toLocaleString("es-CL");
    }
  }

  // ---------- CALCULADORA BOLETA ----------
  const montoInput = document.getElementById("monto");
  const errorBox = document.getElementById("error");
  const resultsEl = document.getElementById("results");
  const rateGroup = document.getElementById("rateGroup");

  const liqBruto = document.getElementById("liq-bruto");
  const liqLiquido = document.getElementById("liq-liquido");
  const liqRetencion = document.getElementById("liq-retencion");

  const bruBruto = document.getElementById("bru-bruto");
  const bruLiquido = document.getElementById("bru-liquido");
  const bruRetencion = document.getElementById("bru-retencion");

  function getRate() {
    const checked = rateGroup.querySelector("input[name='rate']:checked");
    return checked ? Number(checked.value) : 0.145;
  }

  function recalculateBoleta() {
    const raw = montoInput.value.trim();
    errorBox.textContent = "";

    if (!raw) {
      resultsEl.style.opacity = 0.45;
      liqBruto.textContent = "$0";
      liqLiquido.textContent = "$0";
      liqRetencion.textContent = "$0";
      bruBruto.textContent = "$0";
      bruLiquido.textContent = "$0";
      bruRetencion.textContent = "$0";
      return;
    }

    const monto = Number(raw);
    if (isNaN(monto) || monto <= 0) {
      errorBox.textContent = "El monto debe ser un n√∫mero mayor a 0, sin puntos ni comas.";
      resultsEl.style.opacity = 0.45;
      return;
    }

    const rate = getRate();

    const liquidoDeseado = monto;
    const brutoNecesario = liquidoDeseado / (1 - rate);
    const retencionLiquido = brutoNecesario - liquidoDeseado;

    const brutoPactado = monto;
    const liquidoRecibes = brutoPactado * (1 - rate);
    const retencionBruto = brutoPactado - liquidoRecibes;

    liqBruto.textContent = formatCLP(brutoNecesario);
    liqLiquido.textContent = formatCLP(liquidoDeseado);
    liqRetencion.textContent = formatCLP(retencionLiquido);

    bruBruto.textContent = formatCLP(brutoPactado);
    bruLiquido.textContent = formatCLP(liquidoRecibes);
    bruRetencion.textContent = formatCLP(retencionBruto);

    resultsEl.style.opacity = 1;
  }

  montoInput.addEventListener("input", recalculateBoleta);

  rateGroup.addEventListener("change", () => {
    const pills = rateGroup.querySelectorAll(".rate-pill");
    pills.forEach(pill => {
      const input = pill.querySelector("input");
      pill.classList.toggle("active", input.checked);
    });
    recalculateBoleta();
  });

  // ---------- CALCULADORA SUELDO ----------
  const slBrutoInput = document.getElementById("sl-bruto");
  const slAfpInput = document.getElementById("sl-afp");
  const slSaludInput = document.getElementById("sl-salud");
  const slCesInput = document.getElementById("sl-cesantia");

  function calcularSueldo() {
    const bruto = Number(slBrutoInput.value);
    const afpPct = Number(slAfpInput.value || 0) / 100;
    const saludPct = Number(slSaludInput.value || 0) / 100;
    const cesPct = Number(slCesInput.value || 0) / 100;

    const err = document.getElementById("sl-error");
    const row = document.getElementById("sl-results");

    const vAfp = document.getElementById("sl-afp-val");
    const vSalud = document.getElementById("sl-salud-val");
    const vCes = document.getElementById("sl-cesantia-val");
    const vImp = document.getElementById("sl-impuesto-val");
    const vLiq = document.getElementById("sl-liquido-val");

    err.textContent = "";

    if (!bruto || bruto <= 0) {
      row.style.opacity = 0.45;
      vAfp.textContent = "$0";
      vSalud.textContent = "$0";
      vCes.textContent = "$0";
      vImp.textContent = "$0";
      vLiq.textContent = "$0";
      return;
    }

    const dAfp = bruto * afpPct;
    const dSalud = bruto * saludPct;
    const dCes = bruto * cesPct;

    const imponible = bruto - dAfp - dSalud;

    let impuesto = 0;
    if (imponible > 2052302) impuesto = imponible * 0.08;
    else if (imponible > 923537) impuesto = imponible * 0.04;

    const liquido = bruto - dAfp - dSalud - dCes - impuesto;

    const f = n => n.toLocaleString("es-CL");

    vAfp.textContent = "$" + f(Math.round(dAfp));
    vSalud.textContent = "$" + f(Math.round(dSalud));
    vCes.textContent = "$" + f(Math.round(dCes));
    vImp.textContent = "$" + f(Math.round(impuesto));
    vLiq.textContent = "$" + f(Math.round(liquido));

    row.style.opacity = 1;
  }

  ["sl-bruto", "sl-afp", "sl-salud", "sl-cesantia"].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.addEventListener("input", calcularSueldo);
  });

  calcularSueldo();

  // ---------- CALCULADORA UF ----------
  const ufMontoInput = document.getElementById("ufMonto");
  const ufValorInput = document.getElementById("ufValor");
  const ufDirectionGroup = document.getElementById("ufDirectionGroup");
  const ufErrorBox = document.getElementById("ufError");
  const ufResults = document.getElementById("ufResults");
  const ufLegend = document.getElementById("ufLegend");

  async function autoFillUF() {
    try {
      const res = await fetch("https://mindicador.cl/api");
      if (!res.ok) throw new Error("HTTP " + res.status);

      const data = await res.json();
      const ufData = data?.uf;
      if (!ufData || ufData.valor == null) return;

      const valorNum = Number(String(ufData.valor).replace(",", "."));
      if (isNaN(valorNum) || valorNum <= 0) return;

      ufValorInput.value = valorNum.toFixed(2);

      if (ufData.fecha && ufLegend) {
        const fechaObj = new Date(ufData.fecha);
        const dia = String(fechaObj.getDate()).padStart(2, "0");
        const mes = String(fechaObj.getMonth() + 1).padStart(2, "0");
        const a√±o = fechaObj.getFullYear();

        ufLegend.textContent =
          `UF autom√°tica del d√≠a ${dia}-${mes}-${a√±o} (mindicador.cl). ` +
          `Puedes editarla si necesitas otra fecha.`;
      }

      recalculateUF();
    } catch (err) {
      console.error("No se pudo cargar UF autom√°tica", err);
      if (ufLegend) {
        ufLegend.textContent =
          "No se pudo obtener la UF autom√°tica. Ingresa el valor manualmente.";
      }
    }
  }

  autoFillUF();

  function formatUF(value) {
    if (!isFinite(value)) return "0 UF";
    try {
      return (
        new Intl.NumberFormat("es-CL", {
          minimumFractionDigits: 4,
          maximumFractionDigits: 4
        }).format(value) + " UF"
      );
    } catch (e) {
      return value.toFixed(4) + " UF";
    }
  }

  function recalculateUF() {
    const rawMonto = ufMontoInput.value.trim();
    const rawValor = ufValorInput.value.trim();
    ufErrorBox.textContent = "";

    if (!rawMonto || !rawValor) {
      ufResults.style.opacity = 0.45;
      ufResults.textContent = "Ingresa un monto y el valor UF para ver el resultado.";
      return;
    }

    const monto = Number(rawMonto);
    const valorUF = Number(rawValor);

    if (isNaN(monto) || monto <= 0 || isNaN(valorUF) || valorUF <= 0) {
      ufErrorBox.textContent = "Monto y valor UF deben ser n√∫meros mayores a 0.";
      ufResults.style.opacity = 0.45;
      return;
    }

    const direction = ufDirectionGroup.querySelector("input[name='ufDirection']:checked").value;

    let texto = "";
    if (direction === "clpToUf") {
      const uf = monto / valorUF;
      texto =
        `${formatCLP(monto)} equivalen aproximadamente a ` +
        `<strong>${formatUF(uf)}</strong> usando UF = ${formatCLP(valorUF)}.`;
    } else {
      const clp = monto * valorUF;
      texto =
        `${formatUF(monto)} equivalen aproximadamente a ` +
        `<strong>${formatCLP(clp)}</strong> usando UF = ${formatCLP(valorUF)}.`;
    }

    ufResults.innerHTML = texto;
    ufResults.style.opacity = 1;
  }

  ufMontoInput.addEventListener("input", recalculateUF);
  ufValorInput.addEventListener("input", recalculateUF);

  ufDirectionGroup.addEventListener("change", () => {
    const pills = ufDirectionGroup.querySelectorAll(".direction-pill");
    pills.forEach(pill => {
      const input = pill.querySelector("input");
      pill.classList.toggle("direction-pill-active", input.checked);
    });
    recalculateUF();
  });

  // ---------- CALCULADORA IVA ----------
  const ivaMontoInput = document.getElementById("ivaMonto");
  const ivaModeGroup = document.getElementById("ivaModeGroup");
  const ivaError = document.getElementById("ivaError");
  const ivaResults = document.getElementById("ivaResults");
  const IVA_RATE = 0.19;

  function recalculateIVA() {
    const raw = ivaMontoInput.value.trim();
    ivaError.textContent = "";

    if (!raw) {
      ivaResults.style.opacity = 0.45;
      ivaResults.textContent = "Ingresa un monto para calcular su IVA, valor neto y bruto.";
      return;
    }

    const monto = Number(raw);
    if (isNaN(monto) || monto <= 0) {
      ivaError.textContent = "El monto debe ser un n√∫mero mayor a 0.";
      ivaResults.style.opacity = 0.45;
      return;
    }

    const mode = ivaModeGroup.querySelector("input[name='ivaMode']:checked").value;

    let texto = "";
    if (mode === "netoBruto") {
      const neto = monto;
      const iva = neto * IVA_RATE;
      const bruto = neto + iva;
      texto =
        `Si el monto <strong>neto</strong> es ${formatCLP(neto)}, ` +
        `el IVA (19%) es <strong>${formatCLP(iva)}</strong> ` +
        `y el total <strong>bruto</strong> es ${formatCLP(bruto)}.`;
    } else if (mode === "brutoNeto") {
      const bruto = monto;
      const neto = bruto / (1 + IVA_RATE);
      const iva = bruto - neto;
      texto =
        `Si el monto <strong>bruto</strong> es ${formatCLP(bruto)}, ` +
        `el valor <strong>neto</strong> es ${formatCLP(neto)} ` +
        `y el IVA (19%) es <strong>${formatCLP(iva)}</strong>.`;
    } else {
      const iva = monto * IVA_RATE;
      texto =
        `El IVA (19%) de ${formatCLP(monto)} es ` +
        `<strong>${formatCLP(iva)}</strong>.`;
    }

    ivaResults.innerHTML = texto;
    ivaResults.style.opacity = 1;
  }

  ivaMontoInput.addEventListener("input", recalculateIVA);

  ivaModeGroup.addEventListener("change", () => {
    const pills = ivaModeGroup.querySelectorAll(".direction-pill");
    pills.forEach(pill => {
      const input = pill.querySelector("input");
      pill.classList.toggle("direction-pill-active", input.checked);
    });
    recalculateIVA();
  });

  // ---------- BLOG: CARGAR √öLTIMOS ART√çCULOS ----------
  function renderLatestBlogPosts(limit = 5) {
    const list = document.getElementById("blogLatestList");
    if (!list || !window.CALCULANDO_POSTS_2026) return;

    const posts = [...window.CALCULANDO_POSTS_2026].sort((a, b) =>
      (b.date || "").localeCompare(a.date || "")
    );

    const latest = posts.slice(0, limit);

    list.innerHTML = "";
    latest.forEach(post => {
      const li = document.createElement("li");
      li.innerHTML = `
        <a href="${post.slug}">
          <strong>${post.title}</strong>
        </a>
        <div class="tool-subtitle">${post.description}</div>
      `;
      list.appendChild(li);
    });
  }

  document.addEventListener("DOMContentLoaded", () => {
    renderLatestBlogPosts(5);
  });
</script>

<script type="module">
  import { bootstrapPage } from '/js/country-bootstrap.js';
  bootstrapPage('home');
</script>

<script src="https://cdn.counter.dev/script.js" data-id="2b4d8db2-1873-4e97-b61c-13d1ec0c6458" data-utcoffset="-3"></script>

<!-- ASISTENTE IA CALCULANDO -->
<div id="calc-ai-widget">
  <button id="calc-ai-toggle" aria-label="Abrir asistente Calculando">üí¨</button>

  <div id="calc-ai-chat" class="hidden" aria-live="polite">
    <div class="calc-ai-header">
      <div>
        <strong>Asistente Calculando</strong><br />
        <small>Ayuda b√°sica sobre sueldo, impuestos e IVA en Chile</small>
      </div>
      <button id="calc-ai-close" aria-label="Cerrar chat">‚úï</button>
    </div>

    <div id="calc-ai-messages"></div>

    <div class="calc-ai-input-row">
      <input id="calc-ai-input" type="text" placeholder="Escribe tu pregunta aqu√≠..." />
      <button id="calc-ai-send">‚û§</button>
    </div>

    <div class="calc-ai-footer-note">
      Respuesta orientativa. No reemplaza asesor√≠a profesional.
    </div>
  </div>
</div>

<script src="/js/calc-ai-chat.js"></script>
</body>
</html>
