<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <title>Calculando.cl ‚Äì Calculadora de Boletas de Honorarios 2025</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="Calculadora simple y moderna de boletas de honorarios 2025 en Chile. Ingresa un monto y ve cu√°nto debes boletear y cu√°nto recibes l√≠quido, con la retenci√≥n aproximada del SII."
  />
  <style>
    /* --------- TIPOGRAF√çA Y RESET --------- */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    :root {
      --radius-lg: 24px;
      --radius-md: 16px;
      --radius-pill: 999px;
      --transition-fast: 0.18s ease-out;
      --transition-med: 0.25s ease-out;
    }

    html[data-theme="dark"] {
      --bg: radial-gradient(circle at top, #0f172a 0, #020617 52%, #020617 100%);
      --shell: rgba(15, 23, 42, 0.9);
      --card: rgba(15, 23, 42, 0.9);
      --border-subtle: rgba(148, 163, 184, 0.5);
      --border-strong: rgba(148, 163, 184, 0.8);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #facc15;
      --accent-soft: rgba(250, 204, 21, 0.12);
      --primary: #38bdf8;
      --primary-soft: rgba(56, 189, 248, 0.12);
      --shadow-soft: 0 26px 70px rgba(15, 23, 42, 0.85);
      --shadow-card: 0 18px 42px rgba(15, 23, 42, 0.95);
      --header-glow: 0 0 40px rgba(56, 189, 248, 0.35);
      --chip-bg: rgba(15, 23, 42, 0.9);
    }

    html[data-theme="light"] {
      --bg: radial-gradient(circle at top, #e0edff 0, #f4f7fb 45%, #ffffff 100%);
      --shell: rgba(255, 255, 255, 0.9);
      --card: #ffffff;
      --border-subtle: rgba(148, 163, 184, 0.35);
      --border-strong: rgba(148, 163, 184, 0.8);
      --text: #0f172a;
      --muted: #6b7280;
      --accent: #eab308;
      --accent-soft: rgba(234, 179, 8, 0.12);
      --primary: #2563eb;
      --primary-soft: rgba(37, 99, 235, 0.12);
      --shadow-soft: 0 20px 60px rgba(15, 23, 42, 0.15);
      --shadow-card: 0 16px 36px rgba(15, 23, 42, 0.12);
      --header-glow: 0 0 0 rgba(0, 0, 0, 0);
      --chip-bg: #f9fafb;
    }

    body {
      min-height: 100vh;
      background: var(--bg);
      color: var(--text);
      display: flex;
      align-items: stretch;
      justify-content: center;
      transition: background 0.4s ease-out, color 0.25s ease-out;
    }

    main {
      width: 100%;
      max-width: 960px;
      padding: 22px 16px 34px;
      margin: 0 auto;
      animation: fade-in 0.6s ease-out;
    }

    @keyframes fade-in {
      from {
        opacity: 0;
        transform: translateY(6px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* --------- HEADER --------- */

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .logo-block {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-mark {
      width: 36px;
      height: 36px;
      border-radius: 14px;
      background: radial-gradient(circle at 30% 20%, #f9fafb 0, #e5e7eb 24%, #0ea5e9 50%, #4f46e5 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 18px;
      color: #0b1120;
      box-shadow: var(--header-glow);
      transform: translateY(0);
      transition: transform var(--transition-med), box-shadow var(--transition-med);
    }

    .logo-block:hover .logo-mark {
      transform: translateY(-1px) scale(1.02);
      box-shadow: 0 0 55px rgba(56, 189, 248, 0.55);
    }

    .logo-text {
      display: flex;
      flex-direction: column;
    }

    .logo-text strong {
      font-size: 20px;
      letter-spacing: 0.02em;
    }

    .logo-text span {
      font-size: 12px;
      color: var(--muted);
    }

    .theme-toggle {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: var(--radius-pill);
      border: 1px solid var(--border-subtle);
      background: var(--chip-bg);
      font-size: 12px;
      color: var(--muted);
      cursor: pointer;
      transition: border-color var(--transition-fast),
        background var(--transition-fast), transform var(--transition-fast),
        box-shadow var(--transition-fast), color var(--transition-fast);
      box-shadow: 0 0 0 rgba(0, 0, 0, 0);
    }

    .theme-toggle-icon {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    html[data-theme="dark"] .theme-toggle-icon {
      background: #0f172a;
    }

    html[data-theme="light"] .theme-toggle-icon {
      background: #facc15;
      color: #1f2933;
    }

    .theme-toggle:hover {
      border-color: var(--primary);
      color: var(--primary);
      transform: translateY(-0.5px);
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.18);
    }

    /* --------- HERO --------- */

    .hero {
      text-align: left;
      margin-bottom: 16px;
    }

    .hero h1 {
      font-size: clamp(22px, 4.8vw, 28px);
      margin-bottom: 6px;
    }

    .hero p {
      font-size: 13px;
      color: var(--muted);
      max-width: 560px;
      line-height: 1.45;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: var(--radius-pill);
      background: var(--primary-soft);
      color: var(--primary);
      font-size: 11px;
      font-weight: 500;
      margin-top: 10px;
    }

    .pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 12px rgba(34, 197, 94, 0.8);
    }

    /* --------- SHELL / CONTENEDOR PRINCIPAL --------- */

    .shell {
      margin-top: 22px;
      background: var(--shell);
      border-radius: var(--radius-lg);
      padding: 20px 16px 22px;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border-subtle);
      backdrop-filter: blur(24px);
    }

    @media (min-width: 768px) {
      .shell {
        padding: 22px 22px 24px;
      }
    }

    /* INPUT MONTO */

    .input-row {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 16px;
    }

    @media (min-width: 640px) {
      .input-row {
        flex-direction: row;
        align-items: center;
      }
    }

    .input-label {
      font-size: 13px;
      color: var(--muted);
      min-width: 130px;
    }

    .amount-wrap {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .amount-prefix {
      font-size: 24px;
      font-weight: 700;
    }

    .amount-input {
      flex: 1;
      padding: 12px 16px;
      font-size: 20px;
      border-radius: var(--radius-pill);
      border: 1px solid var(--border-strong);
      outline: none;
      background: radial-gradient(circle at top, #fef9c3 0, #fef3c7 45%, #fefce8 100%);
      color: #111827;
      text-align: right;
      box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.06);
      transition: box-shadow var(--transition-med), transform var(--transition-med),
        border-color var(--transition-fast), background 0.35s ease-out;
    }

    .amount-input::placeholder {
      color: rgba(15, 23, 42, 0.45);
    }

    .amount-input:focus {
      border-color: var(--accent);
      box-shadow:
        0 0 0 1px rgba(250, 204, 21, 0.45),
        0 18px 32px rgba(250, 204, 21, 0.28);
      transform: translateY(-1px);
    }

    html[data-theme="light"] .amount-input {
      background: radial-gradient(circle at top, #eef2ff 0, #e0f2fe 45%, #eff6ff 100%);
    }

    /* TASA / RATE */

    .rate-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 8px;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .rate-group {
      display: inline-flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .rate-pill {
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      border: 1px solid var(--border-subtle);
      background: var(--chip-bg);
      font-size: 11px;
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 5px;
      cursor: pointer;
      transition: border-color var(--transition-fast),
        background var(--transition-fast), color var(--transition-fast),
        transform var(--transition-fast), box-shadow var(--transition-fast);
    }

    .rate-pill input {
      accent-color: var(--accent);
      cursor: pointer;
    }

    .rate-pill.active {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: var(--accent);
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.2);
      transform: translateY(-0.5px);
    }

    .helper {
      font-size: 11px;
      color: var(--muted);
    }

    .error {
      min-height: 16px;
      font-size: 12px;
      color: #f97373;
      margin-top: 4px;
    }

    /* RESULTADOS */

    .results-row {
      margin-top: 18px;
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    @media (min-width: 720px) {
      .results-row {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .result-card {
      border-radius: var(--radius-md);
      padding: 14px 14px 16px;
      border: 1px solid var(--border-subtle);
      background: linear-gradient(
        145deg,
        rgba(15, 23, 42, 0.98),
        rgba(30, 64, 175, 0.85)
      );
      box-shadow: var(--shadow-card);
      transform: translateY(0);
      transition: transform var(--transition-med), box-shadow var(--transition-med),
        border-color var(--transition-fast), background 0.35s ease-out;
    }

    html[data-theme="light"] .result-card {
      background: linear-gradient(
        145deg,
        #ffffff,
        #e0edff
      );
    }

    .result-card:hover {
      transform: translateY(-1px);
      box-shadow: 0 22px 50px rgba(15, 23, 42, 0.95);
      border-color: var(--primary);
    }

    .result-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .result-main-label {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 4px;
    }

    .result-value {
      font-size: 21px;
      font-weight: 700;
    }

    .result-sub {
      margin-top: 6px;
      font-size: 12px;
      color: var(--muted);
    }

    .result-highlight {
      color: var(--accent);
      font-weight: 600;
    }

    /* FOOTER */

    footer {
      margin-top: 20px;
      font-size: 11px;
      color: var(--muted);
      text-align: center;
      line-height: 1.5;
    }

    footer strong {
      font-weight: 600;
    }
  </style>
</head>
<body>
<main>
  <header>
    <div class="logo-block">
      <div class="logo-mark">C</div>
      <div class="logo-text">
        <strong>Calculando.cl</strong>
        <span>Tus c√°lculos, sin enredos.</span>
      </div>
    </div>

    <button id="themeToggle" class="theme-toggle" type="button">
      <span class="theme-toggle-icon" id="themeIcon">üåô</span>
      <span id="themeLabel">Modo oscuro</span>
    </button>
  </header>

  <section class="hero">
    <h1>Calculadora de Boletas de Honorarios 2025</h1>
    <p>
      Ingresa un monto en pesos chilenos y te mostramos dos escenarios:
      si el monto que tienes en mente es <strong>en l√≠quido</strong> o
      <strong>en bruto</strong>, con la retenci√≥n aproximada que se va al SII.
    </p>
    <div class="pill">
      <span class="pill-dot"></span>
      Tasa por defecto: 14,5% ¬∑ Resultados referenciales, verifica siempre en SII.cl
    </div>
  </section>

  <section class="shell">
    <div class="input-row">
      <div class="input-label">Monto en CLP</div>
      <div class="amount-wrap">
        <span class="amount-prefix">$</span>
        <input
          id="monto"
          class="amount-input"
          type="number"
          inputmode="numeric"
          min="0"
          step="1000"
          placeholder="Ej: 1000000"
        />
      </div>
    </div>

    <div class="rate-row">
      <div class="rate-group" id="rateGroup">
        <label class="rate-pill active">
          <input type="radio" name="rate" value="0.145" checked />
          14,5% <span style="font-size:10px;opacity:.8;">(actual 2025)</span>
        </label>
        <label class="rate-pill">
          <input type="radio" name="rate" value="0.1375" />
          13,75% <span style="font-size:10px;opacity:.8;">(referencial anterior)</span>
        </label>
      </div>
      <div class="helper">
        El c√°lculo se actualiza solo al escribir o cambiar la tasa.
      </div>
    </div>

    <div id="error" class="error"></div>

    <div class="results-row" id="results" style="opacity:0.45;">
      <div class="result-card">
        <div class="result-title">Si el monto ingresado es L√çQUIDO</div>
        <div class="result-main-label">Debes emitir la boleta por:</div>
        <div id="liq-bruto" class="result-value">$0</div>
        <div class="result-sub">
          Recibir√°s <span id="liq-liquido" class="result-highlight">$0</span>
          en tu cuenta y se retendr√°n
          <span id="liq-retencion" class="result-highlight">$0</span>
          para el SII.
        </div>
      </div>

      <div class="result-card">
        <div class="result-title">Si el monto ingresado es BRUTO</div>
        <div class="result-main-label">Emitir√°s la boleta por:</div>
        <div id="bru-bruto" class="result-value">$0</div>
        <div class="result-sub">
          Te depositar√°n
          <span id="bru-liquido" class="result-highlight">$0</span>
          y se retendr√°n
          <span id="bru-retencion" class="result-highlight">$0</span>
          para el SII.
        </div>
      </div>
    </div>
  </section>

  <footer>
    <strong>Calculando.cl</strong> es un proyecto independiente y no tiene
    relaci√≥n con el SII ni con ning√∫n organismo del Estado.
    Usa esta herramienta como gu√≠a r√°pida y, ante dudas, consulta con un contador.
  </footer>
</main>

<script>
  // ---------- TEMA CLARO/OSCURO ----------

  const themeToggle = document.getElementById("themeToggle");
  const themeIcon = document.getElementById("themeIcon");
  const themeLabel = document.getElementById("themeLabel");
  const rootEl = document.documentElement;

  function applyTheme(theme) {
    rootEl.setAttribute("data-theme", theme);
    if (theme === "dark") {
      themeIcon.textContent = "üåô";
      themeLabel.textContent = "Modo oscuro";
    } else {
      themeIcon.textContent = "‚òÄÔ∏è";
      themeLabel.textContent = "Modo claro";
    }
  }

  // Leer tema guardado
  (function initTheme() {
    const stored = localStorage.getItem("calculando-theme");
    if (stored === "light" || stored === "dark") {
      applyTheme(stored);
    } else {
      applyTheme("dark");
    }
  })();

  themeToggle.addEventListener("click", () => {
    const current = rootEl.getAttribute("data-theme") || "dark";
    const next = current === "dark" ? "light" : "dark";
    applyTheme(next);
    localStorage.setItem("calculando-theme", next);
  });

  // ---------- CALCULADORA ----------

  const montoInput = document.getElementById("monto");
  const errorBox = document.getElementById("error");
  const resultsEl = document.getElementById("results");
  const rateGroup = document.getElementById("rateGroup");

  const liqBruto = document.getElementById("liq-bruto");
  const liqLiquido = document.getElementById("liq-liquido");
  const liqRetencion = document.getElementById("liq-retencion");

  const bruBruto = document.getElementById("bru-bruto");
  const bruLiquido = document.getElementById("bru-liquido");
  const bruRetencion = document.getElementById("bru-retencion");

  function formatCLP(value) {
    if (!isFinite(value)) return "$0";
    try {
      return new Intl.NumberFormat("es-CL", {
        style: "currency",
        currency: "CLP",
        maximumFractionDigits: 0
      }).format(Math.round(value));
    } catch (e) {
      return "$" + Math.round(value).toLocaleString("es-CL");
    }
  }

  function getRate() {
    const checked = rateGroup.querySelector("input[name='rate']:checked");
    return checked ? Number(checked.value) : 0.145;
  }

  function recalculate() {
    const raw = montoInput.value.trim();
    errorBox.textContent = "";

    if (!raw) {
      resultsEl.style.opacity = 0.45;
      liqBruto.textContent = "$0";
      liqLiquido.textContent = "$0";
      liqRetencion.textContent = "$0";
      bruBruto.textContent = "$0";
      bruLiquido.textContent = "$0";
      bruRetencion.textContent = "$0";
      return;
    }

    const monto = Number(raw);
    if (isNaN(monto) || monto <= 0) {
      errorBox.textContent = "El monto debe ser un n√∫mero mayor a 0, sin puntos ni comas.";
      resultsEl.style.opacity = 0.45;
      return;
    }

    const rate = getRate();

    // Escenario 1: el monto ingresado es l√≠quido
    const liquidoDeseado = monto;
    const brutoNecesario = liquidoDeseado / (1 - rate);
    const retencionLiquido = brutoNecesario - liquidoDeseado;

    // Escenario 2: el monto ingresado es bruto
    const brutoPactado = monto;
    const liquidoRecibes = brutoPactado * (1 - rate);
    const retencionBruto = brutoPactado - liquidoRecibes;

    liqBruto.textContent = formatCLP(brutoNecesario);
    liqLiquido.textContent = formatCLP(liquidoDeseado);
    liqRetencion.textContent = formatCLP(retencionLiquido);

    bruBruto.textContent = formatCLP(brutoPactado);
    bruLiquido.textContent = formatCLP(liquidoRecibes);
    bruRetencion.textContent = formatCLP(retencionBruto);

    resultsEl.style.opacity = 1;
  }

  montoInput.addEventListener("input", recalculate);

  rateGroup.addEventListener("change", () => {
    // actualizar estilos activos
    const pills = rateGroup.querySelectorAll(".rate-pill");
    pills.forEach(pill => {
      const input = pill.querySelector("input");
      pill.classList.toggle("active", input.checked);
    });
    recalculate();
  });
</script>
</body>
</html>